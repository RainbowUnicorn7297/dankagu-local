import grpc

from takasho.packer import packer
from takasho.schema.common_featureset.player_api import player_storage_pb2


if __name__ == '__main__':
    # Debug packer
    # print(bytes.hex(packer.unpack(bytes.fromhex('860a1c68b9e792a180f17ecb700da9eb3f85d531e021f012089820b41840ef86cc6280e2692dd15844c6d699ad49d97c5229e04c4e20ea3d87f446119e5f3ee8831456e0b6eb2ad162e367765d657f622f7f36d8a41b4d0f6536aa49ad8d771e1b7b319f597a6754a4d70293e35a8dbd9ddbce933efecb9597a07aec188a347b4158f20779efba6d7c64b76d0532d8d97de20bdd309faba625569b1e5796c0a9331314eb6e6c8ded78364ecd1dbdc444d90b6b8ee7482f1fc86bfa526644b47836977566dabd8df4d1cb22680102148e7891541243f67035b3a139b2a845940a5d13e04636f2a4f8ad99267ed0db0742737a68a65795f1f939ac4f5256f4f051698ef681511cacf8c721b1ffe17e0e6c59f7f697baf3b0253ca68ed80763270c9dca06b7a6533d03f2b8d45f1a2c31c52e54e913aee515ed85e23313a802c3e3a13bfa05a3876bc8c775e23e4f0aebc0306d6bb1743da29ff028e5156aacb8d45d8929d8829798d400a1dcaf286e1f8f57496dc7e9e36bd310301dc36db5fb3f0166744c6283b637b7e75e3dc734ae3469806c1381486f618b621ace46f6f6916b7884b1fe07078bd22d9365f25aa34b8ce4bd48210ce528d55cbde6cdb2b46cccf174a50dc12b7b37c76ee3aa4e7a798096ce70c84b035c447080916eba77a23bca'))))
    # Debug gRPC message
    # print(player_storage_pb2.PlayerStorageGetEntriesV2.Response.FromString(packer.unpack(bytes.fromhex('e398da84ce41c8983c89bf59c666ec8c8885da422f61a9abf6fc437562c91e8f859b68d195844f518b67aa12a825166343e9851d32dd47e98cc0abec6a75f9d22d1b94dc87e977dd6f4a3c0f5c1f863bed5d1047f52ebd9366e033e7f0b7be264b7221f1392312ad20bb64d3bb4cdfe632d83dd8bd92d2c671fffba8756ed78b4c9b84343b5a88403e1a67e372d38ad9f140c288da4d0c87f76130b77ad36be7e4d857534121da56d4e512a4af398e5b2a50d4fdef33a747b8c26cf1e487e33a0ad098226105e6b0e94467cf39db0bb3b66baf94107c90fd3eaab4bd65038d0f12b1d108fe7fb5f2a0c8854394a9a83ab0d3d8adedcfd8d14c4c'))))
    response = player_storage_pb2.PlayerStorageGetEntriesV2.Response.FromString(packer.unpack(bytes.fromhex('e398da84ce41c8983c89bf59c666ec8c8885da422f61a9abf6fc437562c91e8f859b68d195844f518b67aa12a825166343e9851d32dd47e98cc0abec6a75f9d22d1b94dc87e977dd6f4a3c0f5c1f863bed5d1047f52ebd9366e033e7f0b7be264b7221f1392312ad20bb64d3bb4cdfe632d83dd8bd92d2c671fffba8756ed78b4c9b84343b5a88403e1a67e372d38ad9f140c288da4d0c87f76130b77ad36be7e4d857534121da56d4e512a4af398e5b2a50d4fdef33a747b8c26cf1e487e33a0ad098226105e6b0e94467cf39db0bb3b66baf94107c90fd3eaab4bd65038d0f12b1d108fe7fb5f2a0c8854394a9a83ab0d3d8adedcfd8d14c4c')))
    for entry in response.entries:
        print(bytes.hex(entry.value))

